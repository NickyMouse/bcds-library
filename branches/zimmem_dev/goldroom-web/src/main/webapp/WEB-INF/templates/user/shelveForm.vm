#set($layout="/layout/emptyLayout.vm") 
<form action="/user/shelve.html" method="POST">
#if($bookInfo)
	<table style="width: 80%;margin:auto;" cellspacing="3" cellpadding="0" border="0">
  <tbody>
    <tr>
      <td colspan="2" align="center"><h1>$bookInfo.name</h1></td>
    </tr>
    <tr>
      <td width="300" align="right" valign="top">
		#if($bookInfo.imgUrl && !$bookInfo.getImgUrl().equals(""))
			<img id="bookCoverImage" class="detailBookImage" src="$UPLOAD_IMAGE_PATH/$bookInfo.imgUrl"/>
		#else
			<img id="bookCoverImage" class="detailBookImage" src="$SERVER_NAME/images/noPhoto.png"/>
		#end
	  </td>
      <td width="600"><table width="80%"">
          <tr>
            <td align="right" width="25%"><strong>作者</strong>:&nbsp;&nbsp;</td>
            <td align="left">$bookInfo.author</td>
          </tr>
          <tr>
            <td align="right"><strong>ISBN</strong>:&nbsp;&nbsp;</td>
            <td align="left">$bookInfo.isbn</td>
          </tr>
		  #if($bookInfo.categoryId > 0)
			<tr>
            <td align="right"><strong>类目</strong>:&nbsp;&nbsp;</td>
            <td align="left">$!categoryCache.getFullName($!{bookInfo.categoryId},">>")</td>
          </tr>
		  #else
			<tr valign="top">
              #springBind("bookInfo.categoryId")
				<td align="right">选择类目：&nbsp;&nbsp;</td>
                <td >#parse("widget/selectCategory.vm")
                #validationError()
                </td>
            </tr>
		  
		  #end
          <tr>
            <td align="right"><strong>出版社</strong>:&nbsp;&nbsp;</td>
            <td align="left">$bookInfo.publisher</td>
          </tr>
          <tr>
            <td align="right"><strong>出版日期</strong>:&nbsp;&nbsp;</td>
            <td align="left">$!dateTool.format("yyyy-MM",$bookInfo.publishTime)</td>
          </tr>
          <tr>
            <td align="right"><strong>版次</strong>:&nbsp;&nbsp;</td>
            <td align="left">$bookInfo.edition</td>
          </tr>
          <tr>
            <td align="right" valign="top"><strong>描述</strong>:&nbsp;&nbsp;</td>
            <td align="left"><p>$bookInfo.description
            </p></td>
          </tr>
        </table></td>
    </tr>
  </tbody>
</table>
#else
<table style="width: 80%;margin:auto;" cellspacing="0" cellpadding="3" border="0">
  <tbody>
    <tr>
      <td align="center">
       
          <table >
            <tr  valign="top">
              <td align="right">ISBN：&nbsp;&nbsp; </td>
              <td align="left">$!{isbn}
                
              </td>
            </tr>
			<tr valign="top">
				<td align="right">书本封面：&nbsp;&nbsp; </td>
				<td>#parse("user/fileUploadForm.vm")
  				</td>
            </tr>
			<input type="hidden" name="isbn" value="$!{isbn}"/>
            <tr  valign="top">
              ##springBind("shelve.bookInfo.name")
              <td align="right">书本名称：&nbsp;&nbsp; </td>
              <td >#springFormInput("shelve.bookInfo.name" 'size="45" maxlength="45"')
               #validationError()
              </td>
            </tr>
            <tr valign="top">
              ##springBind("bookInfo.author")
              <td align="right">作者：&nbsp;&nbsp;</td>
              <td >#springFormInput("shelve.bookInfo.author" 'size="45" maxlength="45"')
              #validationError()
			  </td>
            </tr>
            <tr valign="top">
              ##springBind("bookInfo.categoryId")
				<td align="right">选择类目：&nbsp;&nbsp;</td>
                <td >#parse("widget/selectCategory.vm")
                #validationError()
                </td>
            </tr>
            <tr valign="top">
             ##springBind("bookInfo.publisher")
              <td align="right">出版社：&nbsp;&nbsp; </td>
              <td >#springFormInput("shelve.bookInfo.publisher" 'size="45" maxlength="45"')
              #validationError()
              </td>
            </tr>
			<link rel="stylesheet" type="text/css" href="$SERVER_NAME/css/calendar.css" media="screen" />
			<script type="text/javascript" src="$SERVER_NAME/js/mootools.js"></script>
			<script type="text/javascript" src="$SERVER_NAME/js/calendar.rc4.js"></script>
			 <tr valign="top">
			  ##springBind("bookInfo.publishTime")
              <td align="right">出版时间：&nbsp;&nbsp; </td>
              <td >#parse("widget/yearMonthSelector.vm")
				#springFormHiddenInput("shelve.bookInfo.publishTime" 'size="45" maxlength="45" readonly="true"')
              #validationError()
              </td>
            </tr>
			<tr valign="top">
			  ##springBind("bookInfo.edition")
              <td align="right">版本：&nbsp;&nbsp; </td>
              <td >#springFormInput("shelve.bookInfo.edition" 'size="45" maxlength="45"')
              #validationError()
              </td>
            </tr>
            <tr valign="top">
	          ##springBind("bookInfo.description")
              <td align="right">书本描述：&nbsp;&nbsp; </td>
              <td >#springFormTextarea("shelve.bookInfo.description" 'rows="10" cols="55"')
              #validationError()
              </td>
            </tr>
			
           
		
          </table>
        </td>
    </tr>
  </tbody>
</table>

#end
<table style="width: 80%;margin:auto;" cellspacing="0" cellpadding="3" border="0">
	<tbody>
    <tr >
		<td colspan="2" align="center">
           ##springBind("shelve.bookItem.*")
				<input type="hidden" name="isbn" value="$!{bookInfo.isbn}"/>
				<br/>
				<h2>为这本书添加一些标签以方便他人查找#springFormInput("shelve.bookItem.tags")</h2>
				<br/>
				<input  type="submit" value ="确定上架"/>
		</td>
	</tr>
	</tbody>
</table>
</form>



