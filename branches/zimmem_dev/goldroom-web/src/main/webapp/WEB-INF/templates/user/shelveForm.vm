<script type="text/javascript" src="$SERVER_NAME/js/selectCategory.js"></script>
#set($layout="/layout/emptyLayout.vm") 
<form action="/user/shelveForm.htm" method="POST">
    #springFormHiddenInput("shelve.newBookInfo","")
    #springFormHiddenInput("shelve.updateCategory","")
    #springFormHiddenInput("shelve.bookInfo.id","")
    <table style="width: 80%;margin:auto;" cellspacing="3" cellpadding="0" border="0">
        <tbody>
            #if($bookInfo)
                <tr>
                    <td align="right" valign="top">
                        #if($bookInfo.imgUrl && !$bookInfo.getImgUrl().equals(""))
                            <img id="bookCoverImage" class="detailBookImage" src="$UPLOAD_IMAGE_PATH/$bookInfo.imgUrl"/>
                            #else
                                <img id="bookCoverImage" class="detailBookImage" src="$SERVER_NAME/images/noPhoto.png"/>
                        #end
                    </td>
                    <td>
                        <table width="80%"">
                            <tr >
                                <td align="right">书名:&nbsp;&nbsp;</td>
                                <td >
                                    $!{bookInfo.name}
                                </td>
                            </tr>
                            <tr>
                                <td align="right" width="25%">作者:&nbsp;&nbsp;</td>
                                <td align="left">$!{bookInfo.author}</td>
                            </tr>
                            <tr>
                                <td align="right">ISBN:&nbsp;&nbsp;</td>
                                <td align="left">$!{bookInfo.isbn}</td>
                            </tr>
                            <tr>
                                <td align="right">出版社:&nbsp;&nbsp;</td>
                                <td align="left">$!{bookInfo.publisher}</td>
                            </tr>
                            <tr>
                                <td align="right">出版日期:&nbsp;&nbsp;</td>
                                <td align="left">$!dateTool.format("yyyy-MM",${bookInfo.publishTime})</td>
                            </tr>
                            <tr>
                                <td align="right">版次:&nbsp;&nbsp;</td>
                                <td align="left">$!{bookInfo.edition}</td>
                            </tr>
                            <tr>
                                <td align="right" valign="top">描述:&nbsp;&nbsp;</td>
                                <td align="left">
                                    <p>$!{bookInfo.description}
                                    </p>
                                </td>
                            </tr>
                            #if(!${shelve.updateCategory})
                                <tr>
                                    <td align="right">类目:&nbsp;&nbsp;</td>
                                    <td align="left">$!categoryCache.getFullName($!{bookInfo.categoryId},">>")</td>
                                </tr>
                             #else
                                    <tr valign="top">
                                        #springBind("shelve.bookInfo.categoryId")
                                        <td align="right">选择类目:&nbsp;&nbsp;</td>
                                        <td >#parse("widget/selectCategory.vm")
                                            #validationError()
                                        </td>
                                    </tr>
							#end
						</table>
					</td>
				</tr>
#else
    <tr>
        <td align="center">
            <table width="20%" align="left">
                <tr>
                    <td width="20%">&nbsp;</td>
                    <td colspan="1" align="left">书本封面：&nbsp;&nbsp;</td>
                </tr>
                <tr valign="top" align="left">
                    <td width="20%">&nbsp;</td>
                    <td>#parse("user/fileUploadForm.vm")
                    </td>
                </tr>
            </table>
            <table >
                <tbody >
                    <tr  valign="top">
                        <td align="right">ISBN：&nbsp;&nbsp; </td>
                        <td align="left">$!{isbn}                
                        </td>
                    </tr>
                    <input type="hidden" name="isbn" value="$!{isbn}"/>
                    <tr  valign="top">
                        ##springBind("shelve.bookInfo.name")
                        <td align="right">书本名称：&nbsp;&nbsp; </td>
                        <td >#springFormInput("shelve.bookInfo.name" 'size="45" maxlength="45"')
                            #validationError()
                        </td>
                    </tr>
                    <tr valign="top">
                        ##springBind("bookInfo.author")
                        <td align="right">作者：&nbsp;&nbsp;</td>
                        <td >#springFormInput("shelve.bookInfo.author" 'size="45" maxlength="45"')
                            #validationError()
                        </td>
                    </tr>
                    <tr valign="top">
                        ##springBind("bookInfo.publisher")
                        <td align="right">出版社：&nbsp;&nbsp; </td>
                        <td >#springFormInput("shelve.bookInfo.publisher" 'size="45" maxlength="45"')
                            #validationError()
                        </td>
                    </tr>
                    <link rel="stylesheet" type="text/css" href="$SERVER_NAME/css/calendar.css" media="screen" />
                    <script type="text/javascript" src="$SERVER_NAME/js/mootools.js"></script>
                    <script type="text/javascript" src="$SERVER_NAME/js/calendar.rc4.js"></script>
                    <tr valign="top">
                        ##springBind("bookInfo.publishTime")
                        <td align="right">出版时间：&nbsp;&nbsp; </td>
                        <td >#parse("widget/yearMonthSelector.vm")
                            #springFormHiddenInput("shelve.bookInfo.publishTime" 'size="45" maxlength="45" readonly="true"')
                            #validationError()
                        </td>
                    </tr>
                    <tr valign="top">
                        ##springBind("bookInfo.edition")
                        <td align="right">版本：&nbsp;&nbsp; </td>
                        <td >#springFormInput("shelve.bookInfo.edition" 'size="45" maxlength="45"')
                            #validationError()
                        </td>
                    </tr>
                    <tr valign="top">
                        ##springBind("bookInfo.categoryId")
                        <td align="right">选择类目：&nbsp;&nbsp;</td>
                        <td >#parse("widget/selectCategory.vm")
                            #validationError()
                        </td>
                    </tr>
                    <tr valign="top">
                        ##springBind("bookInfo.description")
                        <td align="right">书本描述：&nbsp;&nbsp; </td>
                        <td >#springFormTextarea("shelve.bookInfo.description" 'rows="5" cols="51"')
                            #validationError()
                        </td>
                    </tr>
#end
                </tbody>
            </table>
            <table align="center">
                <tbody>
                    <tr valign="top">
                        <td align="right">
                            标签:&nbsp;&nbsp;
                        </td>
                        <td>
                            #springFormInput("shelve.bookItem.tags" 'size="45" maxlength="45" title="输入一些关键字方便其它人查找"')			
                        </td>
                    </tr>
                    <tr>
                        <td align="right">
                            备注:&nbsp;&nbsp;
                        </td>
                        <td>
                            #springFormTextarea("shelve.bookItem.remark" 'rows="5" cols="51" title="对你的书的情况说明"')			
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <input type="hidden" name="isbn" value="$!{bookInfo.isbn}"/>
                            <input type="hidden" name="imgUrl" value=""/>
                        </td>
                        <td colspan="1">
                            <input  type="submit" value ="确定上架"/>
                        </td>
                    </tr>
                </tbody>
            </table>
        </td>
    </tr>
</tbody>
</table>
</form>
